{"version":3,"sources":["Services/async-storage.service.js","Services/weatherService.js","store/actions/weatherActions.js","cmps/AppHeader.jsx","cmps/SearchBar.jsx","hooks/useInput.jsx","Services/favoritesService.js","imgs/cloudy-day.png","imgs/rain.png","imgs/sun.png","imgs/cloud-with-rain.png","cmps/CurrentLocation.jsx","store/actions/favoriteActions.js","cmps/TemperatureCard.jsx","cmps/TemperatureList.jsx","pages/HomePage.jsx","cmps/FavoriteCard.jsx","cmps/FavoriteList.jsx","pages/Favorites.jsx","cmps/AppFooter.jsx","App.jsx","reportWebVitals.js","store/reducers/weatherReducer.js","store/reducers/favoriteReducer.js","store/index.js","index.js"],"names":["storageService","loadFromStorage","key","json","localStorage","getItem","JSON","parse","saveToStorage","data","stringify","setItem","axios","require","default","WEATHER_KEY","defaultWeather","weather","_cacheWeather","weatherService","query","searchCity","getForecast","cityName","a","get","res","alert","cityKey","then","DailyForecasts","console","log","getCity","dispatch","city","type","Key","fiveDaysForecast","changeMeasure","measure","AppHeader","measureState","useSelector","state","weatherModule","useDispatch","className","onClick","activeClassName","exact","to","SearchBar","initialValue","useState","value","setValue","reset","bind","onChange","event","target","useInput","nameValue","onSubmit","placeholder","FAVORITE_KEY","favorites","favoriteService","saveFavorite","deleteFavorite","favorite","_id","makeId","push","idx","findIndex","splice","length","txt","possible","i","charAt","Math","floor","random","CurrentLocation","cityState","weatherState","forecast","favoriteState","favoriteModule","checkFavorites","find","condition","src","cloudyDayImg","rainImg","sunImg","cloudWithRainImg","showWeatherConditions","Day","IconPhrase","LocalizedName","favoriteToSave","TemperatureCard","props","weatherDate","day","Date","split","substring","getDayName","forecastDay","Temperature","Maximum","Value","Minimum","parseInt","dateStr","locale","toLocaleDateString","weekday","TemperatureList","map","HomePage","FavoriteCard","redirectState","setRedirect","favoriteClicked","Imperial","WeatherText","FavoriteList","Favorites","AppFooter","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","INITIAL_STATE","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","action","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.26d6d134.chunk.js","sourcesContent":["\r\nexport const storageService = {\r\n    loadFromStorage,\r\n    saveToStorage\r\n}\r\n\r\nfunction loadFromStorage(key) {\r\n    var json = localStorage.getItem(key)\r\n    var data = JSON.parse(json)\r\n    return data;\r\n}\r\n\r\nfunction saveToStorage(key, data){\r\n    var json = JSON.stringify(data);\r\n    localStorage.setItem(key, json)\r\n}","import { storageService } from './async-storage.service.js'\r\nconst axios = require('axios').default;\r\nconst WEATHER_KEY = \"weatherDB\"\r\n\r\nlet defaultWeather = require('../jsons/defaultForecast.json')\r\nlet weather = storageService.loadFromStorage(WEATHER_KEY)\r\nif (!weather) {\r\n    weather = defaultWeather\r\n    _cacheWeather();\r\n}\r\n\r\nexport const weatherService = {\r\n    query,\r\n    searchCity,\r\n    getForecast,\r\n}\r\n\r\n\r\n\r\nfunction query() {\r\n    return weather\r\n}\r\n\r\nasync function searchCity(cityName) {\r\n    try {\r\n        const res = await axios.get(`http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&q=${cityName}`)\r\n        return res.data\r\n    }\r\n\r\n    catch (err) {\r\n        alert('something went wrong!', err)\r\n    }\r\n}\r\n\r\n\r\nasync function getForecast(cityKey) {\r\n\r\n    return axios.get(`http://dataservice.accuweather.com/forecasts/v1/daily/5day/${cityKey}?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&language=en-us&metric=true HTTP/1.1`)\r\n        .then((res) => {\r\n            res = res.data.DailyForecasts\r\n            return res\r\n        })\r\n}\r\n\r\nasync function _cacheWeather() {\r\n    console.log('chacing weather');\r\n    try {\r\n        const res = await axios.get(`http://dataservice.accuweather.com/forecasts/v1/daily/5day/215854?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&language=en-us&metric=true HTTP/1.1`)\r\n        let weather = res.data.DailyForecasts\r\n        storageService.saveToStorage(WEATHER_KEY, weather)\r\n\r\n    } catch (error) {\r\n        storageService.saveToStorage(WEATHER_KEY, defaultWeather)\r\n    }\r\n\r\n}","\r\nimport { weatherService } from \"../../Services/weatherService\"\r\n\r\nexport function getForecast(key) {\r\n  return async (dispatch) => {\r\n    const fiveDaysForecast = await weatherService.getForecast(key)\r\n\r\n    dispatch({ type: \"SET_FORECAST\", fiveDaysForecast })\r\n  }\r\n}\r\n\r\nexport function getCity(cityName) {\r\n  return async (dispatch) => {\r\n    try {\r\n      let city = await weatherService.searchCity(cityName)\r\n      if (city[0]) {\r\n        city = city[0]\r\n        dispatch({ type: \"GET_CITY\", city })\r\n        const fiveDaysForecast = await weatherService.getForecast(city.Key)\r\n        dispatch({ type: \"SET_FORECAST\", fiveDaysForecast })\r\n      }\r\n      else alert('could not find city!');\r\n    }\r\n\r\n\r\n    catch (err) {\r\n    }\r\n\r\n\r\n  }\r\n}\r\n\r\nexport function changeMeasure(measure) {\r\n  return async (dispatch) => {\r\n    dispatch({ type: \"CHANGE_MEASURE\", measure })\r\n  }\r\n}\r\n\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { changeMeasure } from \"../store/actions/weatherActions\";\r\nimport { useDispatch } from \"react-redux\";\r\nexport default function AppHeader() {\r\n  const measureState = useSelector((state) => state.weatherModule.measure);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  function measureButton() {\r\n    if (measureState === \"farenheit\")\r\n      return (\r\n        <button onClick={() => dispatch(changeMeasure(\"celsius\"))}>℉</button>\r\n      );\r\n\r\n    return (\r\n      <button onClick={() => dispatch(changeMeasure(\"farenheit\"))}>℃</button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <header className=\"main-header\">\r\n      <div className=\"header-container\">\r\n        <p>Forecastio</p>\r\n        <ul>\r\n          <li>{measureButton()}</li>\r\n          <li>\r\n            <NavLink activeClassName=\"active-nav\" exact to=\"/\">\r\n              Home\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink activeClassName=\"active-nav\" exact to=\"/favorites\">\r\n              Favorites\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useInput } from \"../hooks/useInput\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getCity } from \"../store/actions/weatherActions\";\r\n\r\nexport default function SearchBar() {\r\n  const dispatch = useDispatch();\r\n  const { value: nameValue, bind, reset } = useInput(\"\");\r\n\r\n  return (\r\n  \r\n      <form className=\"search-bar\"\r\n        onSubmit={() => {\r\n          dispatch(getCity(nameValue));\r\n        }}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          {...bind}\r\n          placeholder=\"Type here your desired city\"\r\n        />\r\n        <button>Search</button>\r\n      </form>\r\n  \r\n  );\r\n}\r\n","import { useState } from \"react\";\r\n\r\nexport const useInput = initialValue => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  return {\r\n    value,\r\n    setValue,\r\n    reset: () => setValue(\"\"),\r\n    bind: {\r\n      value,\r\n      onChange: event => {\r\n        setValue(event.target.value);\r\n      }\r\n    }\r\n  };\r\n};","import { storageService } from './async-storage.service.js'\r\nconst axios = require('axios').default;\r\nconst FAVORITE_KEY = \"weatherFavoritesDB\"\r\n\r\nlet favorites = storageService.loadFromStorage(FAVORITE_KEY)\r\nif (!favorites) favorites = [];\r\n\r\n\r\n\r\n\r\nexport const favoriteService = {\r\n    query,\r\n    saveFavorite,\r\n    deleteFavorite\r\n}\r\n\r\n\r\n\r\nfunction query() {\r\n    return favorites\r\n}\r\n\r\nasync function saveFavorite(favorite) {\r\n    try {\r\n        favorite.weather = await axios.get(`http://dataservice.accuweather.com/currentconditions/v1/${favorite.cityKey}?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&details=false`)\r\n            .then(res => {\r\n                return res.data[0]\r\n            })\r\n\r\n        favorite._id = makeId();\r\n        favorites.push(favorite)\r\n        storageService.saveToStorage(FAVORITE_KEY, favorites)\r\n        return favorites\r\n    }\r\n    catch {\r\n        favorite._id = makeId();\r\n        favorites.push(favorite)\r\n        storageService.saveToStorage(FAVORITE_KEY, favorites)\r\n        return favorites\r\n    }\r\n}\r\n\r\nasync function deleteFavorite(_id) {\r\n    const idx = favorites.findIndex(favorite => favorite._id === _id)\r\n    favorites.splice(idx, 1)\r\n    storageService.saveToStorage(FAVORITE_KEY, favorites)\r\n    return favorites\r\n\r\n}\r\n\r\n\r\n\r\nfunction makeId(length = 7) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}","export default __webpack_public_path__ + \"static/media/cloudy-day.ecd05671.png\";","export default __webpack_public_path__ + \"static/media/rain.57bc7802.png\";","export default __webpack_public_path__ + \"static/media/sun.5b095b3c.png\";","export default __webpack_public_path__ + \"static/media/cloud-with-rain.23007305.png\";","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { saveFavorite } from \"../store/actions/favoriteActions\";\r\nimport cloudyDayImg from \"../imgs/cloudy-day.png\";\r\nimport rainImg from \"../imgs/rain.png\";\r\nimport sunImg from \"../imgs/sun.png\";\r\nimport cloudWithRainImg from \"../imgs/cloud-with-rain.png\";\r\n\r\nexport default function CurrentLocation() {\r\n  const cityState = useSelector((state) => state.weatherModule.city);\r\n  const weatherState = useSelector((state) => state.weatherModule.forecast);\r\n  const favoriteState = useSelector((state) => state.favoriteModule.favorites);\r\n\r\n\r\n\r\n  function checkFavorites() {\r\n\r\n    const isInFavorites = favoriteState.find((favorite) => {\r\n      return favorite.cityKey === cityState.Key;\r\n    });\r\n    if (isInFavorites) return <p>♥</p> ;\r\n    else return <p>♡</p> ;\r\n  }\r\n  checkFavorites();\r\n  const dispatch = useDispatch();\r\n\r\n  function showWeatherConditions(condition) {\r\n    switch (condition) {\r\n      case \"Mostly cloudy\":\r\n        return <img src={cloudyDayImg}></img>;\r\n      case \"Rain\" || \"Showers\":\r\n        return <img src={rainImg}></img>;\r\n      case \"Sunny\":\r\n        return <img src={sunImg}></img>;\r\n      case \"Mostly cloudy w/ showers\":\r\n        return <img src={cloudWithRainImg}></img>;\r\n\r\n      default:\r\n        return <img src={sunImg}></img>;\r\n    }\r\n  }\r\n\r\nif(weatherState) return (\r\n    <div className=\"current-location\">\r\n      <div className=\"current-location-details\">\r\n        {showWeatherConditions(weatherState[0].Day.IconPhrase)}\r\n\r\n        <p>\r\n          It is currently {weatherState[0].Day.IconPhrase} in{\" \"}\r\n          {cityState.LocalizedName}{\" \"}\r\n        </p>\r\n      </div>\r\n      <div className=\"save-details\">\r\n        {checkFavorites()}\r\n        <button\r\n          onClick={() => {\r\n            const favoriteToSave = {\r\n              cityName: cityState.LocalizedName,\r\n              cityKey: cityState.Key,\r\n            };\r\n            dispatch(saveFavorite(favoriteToSave));\r\n          }}\r\n        >\r\n          save\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (<p>loading...</p>)\r\n}\r\n","import { favoriteService } from '../../Services/favoritesService'\r\n\r\nexport function saveFavorite(favorite) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const favorites = await favoriteService.saveFavorite(favorite)\r\n            dispatch({ type: \"ADD_FAVORITE\", favorites })\r\n        }\r\n        catch {\r\n            const favorites = [favorite]\r\n            { dispatch({ type: \"ADD_FAVORITE\", favorites }) }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function deleteFavorite(_id) {\r\n\r\n    return async (dispatch) => {\r\n\r\n        const favorites = JSON.parse(JSON.stringify(await favoriteService.deleteFavorite(_id)))\r\n        dispatch({ type: \"REMOVE_FAVORITE\", favorites })\r\n    }\r\n}\r\n\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nexport default function TemperatureCard(props) {\r\n  const measureState = useSelector((state) => state.weatherModule.measure);\r\n\r\n  function forecastDay() {\r\n    let weatherDate = props.day.Date.split(\"-\");\r\n    weatherDate[2] = weatherDate[2].substring(0, weatherDate[2].length - 15);\r\n    return (\r\n      <p>\r\n        {getDayName(\r\n          `${weatherDate[1]}/${weatherDate[2]}/${weatherDate[0]}`,\r\n          \"en-UK\"\r\n        )}\r\n      </p>\r\n    );\r\n  }\r\n\r\n  function renderTemperature() {\r\n    if (measureState === \"farenheit\") {\r\n      return (\r\n        <p>\r\n          {\" \"}\r\n          {(props.day.Temperature.Maximum.Value +\r\n            props.day.Temperature.Minimum.Value) /\r\n            2}\r\n          ℉\r\n        </p>\r\n      );\r\n          }\r\n      else return (\r\n        <p>\r\n        {\" \"}\r\n        {parseInt(((props.day.Temperature.Maximum.Value-32)*(5/9)) +\r\n         ((props.day.Temperature.Minimum.Value-32)*(5/9))/2)}\r\n        ℃\r\n      </p>\r\n      )\r\n    \r\n  }\r\n\r\n  return (\r\n    <li>\r\n      {forecastDay()}\r\n      {renderTemperature()}\r\n      <p> {props.day.Day.IconPhrase}</p>\r\n    </li>\r\n  );\r\n}\r\nfunction getDayName(dateStr, locale) {\r\n  var date = new Date(dateStr);\r\n  return date.toLocaleDateString(locale, { weekday: \"long\" });\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport TemperatureCard from \"./TemperatureCard\";\r\n\r\nexport default function TemperatureList() {\r\n\r\n  const weatherState= useSelector(state=> state.weatherModule.forecast)\r\n  if(weatherState) return (\r\n    <ul className='temperature-list'>\r\n       { weatherState.map(day =>{\r\n         return <TemperatureCard day={day} />\r\n       })}\r\n    </ul>\r\n\r\n  );\r\n else return (\r\n   <h1>loading</h1>\r\n )\r\n     \r\n\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport SearchBar from \"../cmps/SearchBar\";\r\nimport CurrentLocation from '../cmps/CurrentLocation'\r\nimport TemperatureList from '../cmps/TemperatureList'\r\n\r\nexport default function HomePage() {\r\n\r\n  return (\r\n    <div className=\"home-page\">\r\n      <SearchBar/>\r\n      <main> \r\n      <CurrentLocation/>\r\n      <TemperatureList/>\r\n      </main>\r\n   \r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getCity } from \"../store/actions/weatherActions\";\r\nimport { deleteFavorite } from \"../store/actions/favoriteActions\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nexport default function FavoriteCard(props) {\r\n  const dispatch = useDispatch();\r\n\r\n  const measureState = useSelector((state) => state.weatherModule.measure);\r\n  const [redirectState, setRedirect] = useState(false);\r\n\r\n  async function favoriteClicked() {\r\n    await dispatch(getCity(props.favorite.cityName));\r\n    setRedirect(!redirectState);\r\n  }\r\n\r\n  function renderRedirect() {\r\n    if (redirectState) return <Redirect to=\"/\" />;\r\n    else return null;\r\n  }\r\n\r\n  function renderTemperature() {\r\n    if (measureState === \"farenheit\") {\r\n      return <p>{props.favorite.weather.Temperature.Imperial.Value}℉</p>;\r\n    } else\r\n      return (\r\n        <p>\r\n          {\" \"}\r\n          {parseInt((props.favorite.weather.Temperature.Imperial.Value - 32) * (5 / 9))}℃\r\n        </p>\r\n      );\r\n  }\r\n\r\n  return (\r\n    <li\r\n      onClick={() => {\r\n        favoriteClicked();\r\n      }}\r\n    >\r\n      {renderRedirect()}\r\n      <p> {props.favorite.cityName}</p>\r\n      {renderTemperature()}\r\n      <p>{props.favorite.weather.WeatherText} </p>\r\n\r\n      <button\r\n        onClick={() => {\r\n          dispatch(deleteFavorite(props.favorite._id));\r\n        }}\r\n      >\r\n        Delete\r\n      </button>\r\n    </li>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport FavoriteCard from \"./FavoriteCard\";\r\n\r\nexport default function FavoriteList() {\r\n\r\n  const favoriteState= useSelector(state=> state.favoriteModule.favorites)\r\n   console.log(favoriteState);\r\n  if(favoriteState) return (\r\n    <ul>\r\n       { favoriteState.map(favorite =>{\r\n         return <FavoriteCard favorite={favorite} />\r\n       })}\r\n    </ul>\r\n\r\n  );\r\n else return (\r\n   <h1>no favorites!</h1>\r\n )\r\n\r\n}\r\n","import React from 'react'\r\nimport FavoriteList from '../cmps/FavoriteList'\r\n\r\nexport default function Favorites(){\r\n\r\n   return( <div className=\"favorites\">\r\n      <FavoriteList/>\r\n   </div>)\r\n}","import React from \"react\";\r\n\r\nexport default function AppFooter() {\r\n  return (\r\n    <header className=\"main-footer\">\r\n      <div className=\"footer-container\">\r\n        <p>CofeeRights ©</p>\r\n        </div>\r\n    </header>\r\n  );\r\n}","import { HashRouter as Router, Route, Switch } from \"react-router-dom\";\nimport AppHeader from \"./cmps/AppHeader\";\nimport HomePage from \"./pages/HomePage\";\nimport Favorites from './pages/Favorites'\nimport AppFooter from \"./cmps/AppFooter\";\nfunction App() {\n\n\n  \n  return (\n    <Router>\n        <AppHeader/>\n        <Switch>\n        <Route path=\"/favorites\" component={Favorites} />\n        <Route path=\"/\" component={HomePage} />  \n        </Switch>\n        <AppFooter/>\n    </Router>\n  );\n}\nexport default App\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { weatherService } from \"../../Services/weatherService\"\r\n\r\nconst INITIAL_STATE={\r\n    city: {Key: '21584', LocalizedName: 'Tel Aviv'},\r\n    forecast: weatherService.query(),\r\n    measure:'farenheit'\r\n}\r\n\r\nexport function weatherReducer(state = INITIAL_STATE, action) {\r\n  \r\n    switch (action.type) {\r\n        case \"SET_FORECAST\":\r\n            return {\r\n                ...state,\r\n                forecast: action.fiveDaysForecast\r\n            }\r\n            case \"GET_CITY\":\r\n            return{\r\n                ...state,\r\n               city:action.city\r\n            }\r\n            default: return state\r\n\r\n            case \"CHANGE_MEASURE\":\r\n            return{\r\n                ...state,\r\n                measure:action.measure\r\n            }\r\n          \r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n","import { favoriteService } from '../../Services/favoritesService'\r\n\r\nconst INITIAL_STATE = {\r\n    favorites: favoriteService.query()\r\n}\r\n\r\n\r\nexport function favoriteReducer(state = INITIAL_STATE, action) {\r\n\r\n    switch (action.type) {\r\n        case \"ADD_FAVORITE\":\r\n            return {\r\n                ...state,\r\n               favorites:action.favorites\r\n            }\r\n        case \"REMOVE_FAVORITE\":\r\n            return {\r\n                ...state,\r\n                favorites:action.favorites\r\n            }   \r\n        default: return state\r\n    }\r\n}","import { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport { weatherReducer } from \"./reducers/weatherReducer\";\r\nimport { favoriteReducer } from \"./reducers/favoriteReducer\";\r\n\r\n// Connecting redux devtools\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n// Combining reducers into one\r\nconst rootReducer = combineReducers({\r\n  weatherModule: weatherReducer,\r\n  favoriteModule: favoriteReducer\r\n});\r\n\r\nexport const store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './scss/main.scss';\nimport App from './App.jsx';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from \"react-redux\";\nimport {store} from \"./store\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}
(this.webpackJsonpherolo_weather_project=this.webpackJsonpherolo_weather_project||[]).push([[0],{38:function(e,t,a){},63:function(e){e.exports=JSON.parse('[{"Date":"2021-11-20T07:00:00+02:00","EpochDate":1637384400,"Temperature":{"Minimum":{"Value":58,"Unit":"F","UnitType":18},"Maximum":{"Value":66,"Unit":"F","UnitType":18}},"Day":{"Icon":18,"IconPhrase":"Rain","HasPrecipitation":true,"PrecipitationType":"Rain","PrecipitationIntensity":"Light"},"Night":{"Icon":36,"IconPhrase":"Intermittent clouds","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=1&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=1&lang=en-us"},{"Date":"2021-11-21T07:00:00+02:00","EpochDate":1637470800,"Temperature":{"Minimum":{"Value":59,"Unit":"F","UnitType":18},"Maximum":{"Value":69,"Unit":"F","UnitType":18}},"Day":{"Icon":14,"IconPhrase":"Partly sunny w/ showers","HasPrecipitation":true,"PrecipitationType":"Rain","PrecipitationIntensity":"Light"},"Night":{"Icon":34,"IconPhrase":"Mostly clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=2&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=2&lang=en-us"},{"Date":"2021-11-22T07:00:00+02:00","EpochDate":1637557200,"Temperature":{"Minimum":{"Value":62,"Unit":"F","UnitType":18},"Maximum":{"Value":72,"Unit":"F","UnitType":18}},"Day":{"Icon":3,"IconPhrase":"Partly sunny","HasPrecipitation":false},"Night":{"Icon":33,"IconPhrase":"Clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=3&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=3&lang=en-us"},{"Date":"2021-11-23T07:00:00+02:00","EpochDate":1637643600,"Temperature":{"Minimum":{"Value":62,"Unit":"F","UnitType":18},"Maximum":{"Value":74,"Unit":"F","UnitType":18}},"Day":{"Icon":1,"IconPhrase":"Sunny","HasPrecipitation":false},"Night":{"Icon":35,"IconPhrase":"Partly cloudy","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=4&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=4&lang=en-us"},{"Date":"2021-11-24T07:00:00+02:00","EpochDate":1637730000,"Temperature":{"Minimum":{"Value":59,"Unit":"F","UnitType":18},"Maximum":{"Value":75,"Unit":"F","UnitType":18}},"Day":{"Icon":2,"IconPhrase":"Mostly sunny","HasPrecipitation":false},"Night":{"Icon":34,"IconPhrase":"Mostly clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=5&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=5&lang=en-us"}]')},69:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(16),i=a.n(c),s=(a(38),a(11)),o=a(4),u=a(3),l=a(2),h=a.n(l),p=a(6),d={loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},saveToStorage:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)}};var j=a(22).default,f="weatherDB",v=a(63),b=d.loadFromStorage(f);b||(b=v,function(){w.apply(this,arguments)}());var y={query:function(){return b},searchCity:function(e){return m.apply(this,arguments)},getForecast:function(e){return O.apply(this,arguments)}};function m(){return(m=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&q=".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),alert("something went wrong!",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function O(){return(O=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=j.get("http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&language=en-us&metric=true HTTP/1.1")).then((function(e){return e=e.data.DailyForecasts})),e.abrupt("return",a);case 5:e.prev=5,e.t0=e.catch(0),console.log("error has occured");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function w(){return(w=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("chacing weather"),e.prev=1,e.next=4,j.get("http://dataservice.accuweather.com/forecasts/v1/daily/5day/215854?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&language=en-us&metric=true HTTP/1.1");case 4:t=e.sent,a=t.data.DailyForecasts,d.saveToStorage(f,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),d.saveToStorage(f,v);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function x(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.searchCity(e);case 3:if(!(r=t.sent)[0]){t.next=13;break}return r=r[0],a({type:"GET_CITY",city:r}),t.next=9,y.getForecast(r.Key);case 9:n=t.sent,a({type:"SET_FORECAST",fiveDaysForecast:n}),t.next=14;break;case 13:alert("could not find city!");case 14:t.next=18;break;case 16:t.prev=16,t.t0=t.catch(0);case 18:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()}function g(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"CHANGE_MEASURE",measure:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var T=a.p+"static/media/hamburger.a633845b.png",I=a(1);function S(){var e=Object(u.c)((function(e){return e.weatherModule.measure})),t=Object(u.b)(),a=Object(r.useRef)(null);return Object(I.jsx)("header",{className:"main-header",children:Object(I.jsxs)("div",{className:"header-container",children:[Object(I.jsx)("p",{children:"Forecastio"}),Object(I.jsxs)("ul",{ref:a,children:[Object(I.jsx)("li",{children:"farenheit"===e?Object(I.jsx)("button",{onClick:function(){return t(g("celsius"))},children:"\u2109"}):Object(I.jsx)("button",{onClick:function(){return t(g("farenheit"))},children:"\u2103"})}),Object(I.jsx)("li",{children:Object(I.jsx)(s.b,{activeClassName:"active-nav",exact:!0,to:"/",children:"Home"})}),Object(I.jsx)("li",{children:Object(I.jsx)(s.b,{activeClassName:"active-nav",exact:!0,to:"/favorites",children:"Favorites"})})]}),Object(I.jsx)("button",{className:"hamburger",onClick:function(){return console.log(a),void(a.current.className.includes("visible")?a.current.className="hidden":a.current.className="visible")},children:Object(I.jsx)("img",{src:T,alt:"hamburger menu"})})]})})}var M=a(5),F=a(17);function N(){var e=Object(u.b)(),t=function(e){var t=Object(r.useState)(e),a=Object(F.a)(t,2),n=a[0],c=a[1];return{value:n,setValue:c,reset:function(){return c("")},bind:{value:n,onChange:function(e){c(e.target.value)}}}}(""),a=t.value,n=t.bind,c=t.reset;return Object(I.jsxs)("form",{className:"search-bar",onSubmit:function(){e(x(a)),c()},children:[Object(I.jsx)("input",Object(M.a)(Object(M.a)({type:"text"},n),{},{placeholder:"Type here your desired city"})),Object(I.jsx)("button",{children:"Search"})]})}var D=a(22).default,k="weatherFavoritesDB",P=d.loadFromStorage(k);P||(P=[]);var E={query:function(){return P},saveFavorite:function(e){return _.apply(this,arguments)},deleteFavorite:function(e){var t=P.findIndex((function(t){return t._id===e}));return P.splice(t,1),d.saveToStorage(k,P),P}};function _(){return(_=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.get("http://dataservice.accuweather.com/currentconditions/v1/".concat(t.cityKey,"?apikey=yG9cwpzS3KYzHg0h5iejNAFOvOcWmYz2&details=false")).then((function(e){return e.data[0]}));case 3:return t.weather=e.sent,t._id=A(),P.push(t),d.saveToStorage(k,P),e.abrupt("return",P);case 10:return e.prev=10,e.t0=e.catch(0),t._id=A(),P.push(t),d.saveToStorage(k,P),e.abrupt("return",P);case 16:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function A(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var V=a.p+"static/media/cloudy-day.ecd05671.png",U=a.p+"static/media/rain.57bc7802.png",C=a.p+"static/media/sun.5b095b3c.png",H=a.p+"static/media/cloud-with-rain.23007305.png";function L(){var e=Object(u.c)((function(e){return e.weatherModule.city})),t=Object(u.c)((function(e){return e.weatherModule.forecast})),a=Object(u.c)((function(e){return e.favoriteModule.favorites}));var r=Object(u.b)();return t?Object(I.jsxs)("div",{className:"current-location",children:[Object(I.jsxs)("div",{className:"current-location-details",children:[function(e){switch(e){case"Mostly cloudy":return Object(I.jsx)("img",{src:V});case"Rain":return Object(I.jsx)("img",{src:U});case"Sunny":default:return Object(I.jsx)("img",{src:C});case"Mostly cloudy w/ showers":return Object(I.jsx)("img",{src:H})}}(t[0].Day.IconPhrase),Object(I.jsxs)("p",{children:["It is currently ",t[0].Day.IconPhrase," in"," ",e.LocalizedName," "]})]}),Object(I.jsxs)("div",{className:"save-details",children:[a.find((function(t){return t.cityKey===e.Key}))?Object(I.jsx)("p",{children:"\u2665"}):Object(I.jsx)("p",{children:"\u2661"}),Object(I.jsx)("button",{onClick:function(){var t,a={cityName:e.LocalizedName,cityKey:e.Key};r((t=a,function(){var e=Object(p.a)(h.a.mark((function e(a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.saveFavorite(t);case 3:r=e.sent,a({type:"ADD_FAVORITE",favorites:r}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"ADD_FAVORITE",favorites:[t]});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))},children:"save"})]})]}):Object(I.jsx)("p",{children:"loading..."})}function R(e){var t=Object(u.c)((function(e){return e.weatherModule.measure}));return Object(I.jsxs)("li",{children:[function(){var t=e.day.Date.split("-");return t[2]=t[2].substring(0,t[2].length-15),Object(I.jsx)("p",{children:z("".concat(t[1],"/").concat(t[2],"/").concat(t[0]),"en-UK")})}(),"farenheit"===t?Object(I.jsxs)("p",{children:[" ",(e.day.Temperature.Maximum.Value+e.day.Temperature.Minimum.Value)/2,"\u2109"]}):Object(I.jsxs)("p",{children:[" ",parseInt((e.day.Temperature.Maximum.Value-32)*(5/9)+(e.day.Temperature.Minimum.Value-32)*(5/9)/2),"\u2103"]}),Object(I.jsxs)("p",{children:[" ",e.day.Day.IconPhrase]})]})}function z(e,t){return new Date(e).toLocaleDateString(t,{weekday:"long"})}function K(){var e=Object(u.c)((function(e){return e.weatherModule.forecast}));return e?Object(I.jsx)("ul",{className:"temperature-list",children:e.map((function(e){return Object(I.jsx)(R,{day:e},e.Date)}))}):Object(I.jsx)("h1",{children:"loading"})}function W(){return Object(I.jsxs)("div",{className:"home-page",children:[Object(I.jsx)(N,{}),Object(I.jsxs)("main",{children:[Object(I.jsx)(L,{}),Object(I.jsx)(K,{})]})]})}function Y(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.weatherModule.measure})),n=Object(r.useState)(!1),c=Object(F.a)(n,2),i=c[0],s=c[1];function l(){return(l=Object(p.a)(h.a.mark((function a(){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(x(e.favorite.cityName));case 2:s(!i);case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(I.jsxs)("li",{onClick:function(){!function(){l.apply(this,arguments)}()},children:[i?Object(I.jsx)(o.a,{to:"/"}):null,Object(I.jsxs)("p",{children:[" ",e.favorite.cityName]}),"farenheit"===a?Object(I.jsxs)("p",{children:[e.favorite.weather.Temperature.Imperial.Value,"\u2109"]}):Object(I.jsxs)("p",{children:[" ",parseInt((e.favorite.weather.Temperature.Imperial.Value-32)*(5/9)),"\u2103"]}),Object(I.jsxs)("p",{children:[e.favorite.weather.WeatherText," "]}),Object(I.jsx)("button",{onClick:function(){var a;t((a=e.favorite._id,function(){var e=Object(p.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.t1=JSON,e.next=4,E.deleteFavorite(a);case 4:e.t2=e.sent,e.t3=e.t1.stringify.call(e.t1,e.t2),r=e.t0.parse.call(e.t0,e.t3),t({type:"REMOVE_FAVORITE",favorites:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Delete"})]})}function G(){var e=Object(u.c)((function(e){return e.favoriteModule.favorites}));return e?Object(I.jsx)("ul",{children:e.map((function(e){return Object(I.jsx)(Y,{favorite:e},e._id)}))}):Object(I.jsx)("h1",{children:"no favorites!"})}function J(){return Object(I.jsx)("div",{className:"favorites",children:Object(I.jsx)(G,{})})}function q(){return Object(I.jsx)("header",{className:"main-footer",children:Object(I.jsx)("div",{className:"footer-container",children:Object(I.jsx)("p",{children:"Cofeerights \xa9"})})})}var B=function(){return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(S,{}),Object(I.jsxs)(o.d,{children:[Object(I.jsx)(o.b,{path:"/favorites",component:J}),Object(I.jsx)(o.b,{path:"/",component:W})]}),Object(I.jsx)(q,{})]})},X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,70)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),c(e),i(e)}))},Q=a(13),Z=a(33),$={city:{Key:"21584",LocalizedName:"Tel Aviv"},forecast:y.query(),measure:"farenheit"};var ee={favorites:E.query()};var te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.c,ae=Object(Q.b)({weatherModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FORECAST":return Object(M.a)(Object(M.a)({},e),{},{forecast:t.fiveDaysForecast});case"GET_CITY":return Object(M.a)(Object(M.a)({},e),{},{city:t.city});default:return e;case"CHANGE_MEASURE":return Object(M.a)(Object(M.a)({},e),{},{measure:t.measure})}},favoriteModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":case"REMOVE_FAVORITE":return Object(M.a)(Object(M.a)({},e),{},{favorites:t.favorites});default:return e}}}),re=Object(Q.d)(ae,te(Object(Q.a)(Z.a)));i.a.render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(u.a,{store:re,children:Object(I.jsx)(B,{})})}),document.getElementById("root")),X()}},[[69,1,2]]]);
//# sourceMappingURL=main.79b9dff1.chunk.js.map